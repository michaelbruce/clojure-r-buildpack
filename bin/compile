#!/usr/bin/env bash

set -e

BUILD_DIR=$1
CACHE_DIR="$2/vendor"

# Building R binary

if [ -z "${STACK}" ];
then
  STACK="cedar-14"
fi

S3_BUCKET="heroku-buildpack-r"
BUILD_PACK_VERSION="20160720-0331"
R_VERSION="3.3.1"
R_BINARIES="http://${S3_BUCKET}.s3.amazonaws.com/${STACK}/R-${R_VERSION}-binaries-${BUILD_PACK_VERSION}.tar.gz"

# Building Java binary

BIN_DIR=$(cd $(dirname $0); pwd) # absolute path
. $BIN_DIR/java
. $BIN_DIR/util

# Install JDK
install_java_with_overlay ${BUILD_DIR}

# Printing diagnostic information

export PATH="$BUILD_DIR:$CACHE_DIR:$PATH"

echo $PATH

java -h
